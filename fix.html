<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Mosallas</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=0.5, maximum-scale=1">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<link rel="stylesheet" href="nft-style.css">
	<canvas id="whole" style="position: absolute;z-index:999"></canvas>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
</head>
<body>
	
		<script src="three.min.js"></script>
		<script src="ARnft.js"></script>
		<script src="jquery.min.js"></script>
	
    <div class="alls" style="position: absolute;z-index:999">
    <div class="col">
           <button id="up" class="btn btn-primary" type="button" style="margin-left: 60px;margin-bottom: 10px;width: 50px;background: #6f42c1;">↑</button>
    </div>
    <div class="col" bs-dragged="1">
        <button id="left" class="btn btn-primary" type="button" style="margin-left: 60px;margin-bottom: 10px;width: 50px;background: #6f42c1;">←</button>
        <button id="down" class="btn btn-primary" type="button" style="margin-left: 60px;margin-bottom: 10px;width: 50px;background: #6f42c1;">↓</button>
        <button id="right" class="btn btn-primary" type="button" style="margin-left: 60px;margin-bottom: 10px;width: 50px;background: #6f42c1;">→</button>  
    </div>

    <div class="row" style="margin-left: 60px">
        <input type="number" id="scale"/>
    </div>
    <div class="row" style="margin-left: 60px">
        <input type="number" id="rx"/>
    </div>
    <div class="row" style="margin-left: 60px">
        <input type="number" id="ry"/>
    </div>
	<div class="row" style="margin-left: 60px">
        <input type="number" id="rz"/>
    </div>
    </div>
    <script>
      
      let nft_loaded
      let target
      let x,y
      let rx = 0
      let ry = 0
      let rz = 0
      let scale

			ARnft.ARnft.init(800, 600, "archive/DataNFT/stand", 'config3.json', false, true)
			.then((nft) => {
				nft_loaded = nft;
				
				document.addEventListener('onInitThreejsRendering', (ev) => {
					const renderer = ev.detail.renderer;
					const scene = ev.detail.scene;
					const camera = ev.detail.camera;
					
  					renderer.outputEncoding = THREE.sRGBEncoding;
                                        renderer.textureEncoding = THREE.sRGBEncoding
					renderer.physicallyCorrectLights = true;
				
					const light1  = new THREE.AmbientLight(0xFFFFFF, 0.3);
					    light1.name = 'ambient_light';
					    camera.add( light1 );

					let directionalLight = new THREE.DirectionalLight(0xFFFFFF, 0.8 * Math.PI);
					directionalLight.position.set(0.5, 0, 0.866);
					camera.add(directionalLight);

					x = 190
					y = 140
					scale = 240
					nft.addSimpleModel('./flight_info.glb',x,y,0,scale,function loaded(model){
						target = model
// 						model.rotation.y = -Math.PI /2
						// nft.setOnObjectClickListener('./flight_info.glb' , function() {
						// 	window.open('https://www.filimo.com/m/nrWsV', '_blank').focus()
						// });
						
					});
				
// 					nft.addSimpleAnimatedModel('./PLANE4.glb',190,280,0,14,function loaded(gltf, model){
							
// //  						model.rotation.x = 42*Math.PI/180;
// 						nft.tickExtend = function (){
// // 								model.rotation.y += 0.005
// 						};
						
// 						model.rotation.y = (Math.PI /4)
						
// 					});
				
					
					$('.up').click(function() {
						target.position.y = (target.position.y + 10)
					});
					
					$('.down').click(function() {
					target.position.y = (target.position.y - 10)	
					});
					
					$('.left').click(function() {
					target.position.x = (target.position.x - 10)	
					});
					
					$('.right').click(function() {
						target.position.x = (target.position.x + 10)
					});
					
					$('.scale').change(function(){
						target.scale.set(scale, scale, scale)
					});
						
					$('.rx').change(function(){
						 target.rotation.x = Math.PI*eval($(".rx").val())
					});
					
					$('.ry').change(function(){
 						target.rotation.y = Math.PI*eval($(".ry").val())
					});
					
					$('.rz').change(function(){
						target.rotation.z = Math.PI*eval($(".rz").val())
					});
				})
				
			
				document.addEventListener('getMatrixGL_RH', (ev) => {
					try{
						
					}catch(e){
						alert(e)
					}
				});
            });

    </script>
</body>

</html>
